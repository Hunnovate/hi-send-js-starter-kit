<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hi-Send Starter Kit</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
<div class="container">
  <div style="display: flex; justify-content: center;">
    <img src="Hi-Send Logo2.png" alt="" style="width: 150px;">
  </div>
  <h2 style="text-align: center; margin: 10px;">Reset Password</h2>
  <input type="text" id="token" placeholder="Reset Token" />
  <input type="password" id="password" placeholder="New Password" />
  <input type="password" id="password_confirmation" placeholder="Confirm Password" />
  <button onclick="resetPassword()">Reset Password</button>
  <p><a href="/login.html">Back to Login</a></p>
</div>

<script src="./config.js"></script>
<script src="./js/api.js"></script>
<script>
  async function resetPassword() {
    try {
      const token = document.getElementById("token").value;
      const password = document.getElementById("password").value;
      const password_confirmation = document.getElementById("password_confirmation").value;
      const res = await apiRequest(`/projects/${CONFIG.projectId}/auth/reset-password`, "POST", {
        password: password,
        password_confirmation: password_confirmation,
        email: sessionStorage.getItem("customer_identifier"),
        otp: token,
        otp_reference: sessionStorage.getItem("reset_reference"),
      });
      alert(res.message || "Password reset Successfully");
      location.href = "/login";
    }catch (error) {
      alert(error.message || "Password reset failed");
    }

  }
</script>
</body>
</html>


